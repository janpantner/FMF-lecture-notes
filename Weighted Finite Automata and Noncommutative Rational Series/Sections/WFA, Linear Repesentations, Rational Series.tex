\section{WFA, Linear Representations, Rational Series}

\subsection{Weighted Finite Automata}

\datum{2024-10-01}
\begin{definition}
    Let $K$ be a semiring and $A$ an alphabet.
    \begin{enumerate}[(1)]
        \item A \emph{weighted (finite) automaton}\index{weighted finite automaton} (WFA) with weights in $K$ 
        is a tuple $(Q, I, E, T)$ consisting of a finite set $Q$ of \emph{states},
        and maps $I \colon Q \rightarrow K$ (\emph{initial weights}), 
        $E \colon Q \times A \times Q \rightarrow K$ (\emph{transition function}),
        $T \colon Q \to K$ (\emph{terminal weights}).
        \item A triple $(p, a, q)$ with $E(p, a, q) \neq 0$ is an 
        \emph{edge/transition} with \emph{label} $a$, \emph{starting state} 
        $p$, \emph{ending state} $q$ and \emph{weight} $E(p, a, q) \in K$.
        \item A \emph{path/run} is a sequence of edges
        $c=(q,a_1, q_1)(q_1, a_2, p_2) \dots (q_{n-1}, a, q_n)$. Its 
        \emph{weight} is 
        \[
            E(q,a_1, q_1)\cdot E(q_1, a_2, p_2) \cdots E(q_{n-1}, a_n, q_n)
        \]
        and its \emph{label} is $w = a_1a_2\dots a_n \in A^*$.
        \item The \emph{behaviour} of $\mathcal{A}$ is the series $[[\mathcal{A}]]
        \in K \left<\left<A\right>\right>$ defined by 
        \[
            ([[\mathcal{A}]], w) = \sum_{q_0, \dots, q_n \in Q} I(q_0)
            E(q,a_1, q_1)E(q_1, a_2, p_2) \cdots E(q_{n-1}, a_n, q_n)T(q_n),
        \]
        where $w = a_1\cdots a_n$, $a_i \in A$.
    \end{enumerate}
\end{definition}

\begin{definition} Terminology:
    \begin{enumerate}
        \item A state $q$ is \emph{initial} if $I(q) \neq 0$ and 
        \emph{terminal}  if $T(q) \neq 0$.
        \item A \emph{successful run/accepting run} is a run from 
        an initial state to a terminal state.
    \end{enumerate}
\end{definition}

\subsection{Linear representation, recognizable series}

\begin{definition}
    Let $K$ be a semiring and $A$ an alphabet.
    \begin{enumerate}[(1)]
        \item A series $S \in K \left<\left<A\right>\right>$ is \emph{($K$-)recognizable}\index{recognizable series}
        if there exist $n \ge 0$, $\lambda \in K^{1 \times b}$, $\gamma \in K^{n \times 1}$,
        and a monoid morphism $\mu \colon A^* \to K^{d \times d}$ such that for every 
        $w \in A^*$ we have
        \[
            (S, w) = \lambda \mu(w) \gamma.
        \]
        \item The triple $(\lambda, \mu, \gamma)$ is a \emph{linear representation}\index{linear representation}
        of $S$ with \emph{dimension} $n$.
    \end{enumerate}
\end{definition}

\begin{proposition}
    A series $S \in K \left<\left<A\right>\right>$ is recognizable if and only 
    if there exists a WFA $\mathcal{A}$ such that $S = [[\mathcal{A}]]$.
\end{proposition}

\begin{proof}
    
\end{proof}

\subsection{Model-theoretic Characterization}

\begin{lemma}
    Let $K$ be a semiring and $A$ an alphabet.
    \begin{enumerate}[(1)]
        \item For $x \in A^*$, the map $S \mapsto x^{-1}X$ is a $K$-module 
        morphism.
        \item For every $x,y \in A^*$ and for every $S \in K \left<\left<A\right>\right>$
        we have $(xy)^{-1}S = y^{-1}(x^{-1}S)$.
    \end{enumerate}
\end{lemma}

\begin{proof}
    Left as an exercise.
\end{proof}

\begin{definition}
    A submodule $M \subseteq K \left<\left<A\right>\right>$ is \emph{stable} 
    if for every $S \in M$ and every $x \in A^*$ we have $x^{-1}S \subseteq M$ (equivalently
    for every $a \in A$ we have $a^{-1}M \subseteq M$).
\end{definition}



\begin{theorem}
    A series $S \in K \left<\left<A\right>\right>$ is recognizable if and only 
    if there exists a stable finitely generated left submodule $M \subseteq 
    K \left<\left<A\right>\right>$ such that $S \in M$.
\end{theorem}
\datum{2024-10-08}
\begin{proof}
    
\end{proof}
